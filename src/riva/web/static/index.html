<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>RIVA — AI Agent Task Manager</title>
<link rel="stylesheet" href="/static/css/style.css">
</head>
<body>

<header>
  <h1>RIVA <span>AI Agent Task Manager</span></h1>
  <div class="connection-status" id="conn-header">
    <span class="status-dot live" id="conn-dot"></span>
    <span id="conn-text">Live</span>
  </div>
</header>

<!-- Tab Navigation -->
<nav class="tab-nav">
  <button class="tab-btn active" data-tab="overview">Overview</button>
  <button class="tab-btn" data-tab="network">Network</button>
  <button class="tab-btn" data-tab="security">Security</button>
  <button class="tab-btn" data-tab="usage">Usage</button>
  <button class="tab-btn" data-tab="config">Config</button>
</nav>

<!-- Timeline Bar -->
<div class="timeline-bar" id="timeline-bar">
  <div class="timeline-controls">
    <button class="btn timeline-live-btn active" id="timeline-live-btn" title="Return to live view">Live</button>
    <button class="btn timeline-play-btn" id="timeline-play-btn" title="Play/Pause">&#9654;</button>
    <span class="timeline-label" id="timeline-label">Live</span>
  </div>
  <div class="timeline-track" id="timeline-track">
    <div class="timeline-buckets" id="timeline-buckets"></div>
    <input type="range" class="timeline-slider" id="timeline-slider" min="0" max="100" value="100">
  </div>
</div>

<!-- ============================================================ -->
<!-- Overview Tab -->
<!-- ============================================================ -->
<div class="tab-panel active" id="tab-overview">
  <section id="sec-agents">
    <h2>Agent Overview</h2>
    <div id="agent-table-wrap"><p class="empty-msg">Loading...</p></div>
  </section>

  <section id="sec-agent-cards">
    <h2>Agent Details</h2>
    <div class="card-grid" id="agent-cards"></div>
  </section>

  <section id="sec-orphans" style="display:none">
    <h2>Orphan Processes</h2>
    <div id="orphan-table-wrap"><p class="empty-msg">No orphan processes.</p></div>
  </section>
</div>

<!-- ============================================================ -->
<!-- Network Tab -->
<!-- ============================================================ -->
<div class="tab-panel" id="tab-network">
  <section>
    <h2>Network Connections</h2>
    <p style="color:var(--text-dim);font-size:13px;margin-bottom:16px">
      Active TCP connections from running AI agents. Color coding:
      <span class="conn-established">ESTABLISHED</span> /
      <span class="conn-close-wait">CLOSE_WAIT</span> /
      <span class="conn-time-wait">TIME_WAIT</span>
    </p>
    <div id="network-table-wrap"><p class="empty-msg">Loading...</p></div>
  </section>
</div>

<!-- ============================================================ -->
<!-- Security Tab -->
<!-- ============================================================ -->
<div class="tab-panel" id="tab-security">
  <section>
    <h2>Security Audit</h2>
    <div style="margin-bottom:16px;display:flex;gap:8px">
      <button class="btn btn-primary audit-btn" id="btn-audit-basic" onclick="runAudit(false, this)">Run Audit</button>
      <button class="btn audit-btn" id="btn-audit-network" onclick="runAudit(true, this)">Run Audit (+ Network)</button>
    </div>
    <div id="audit-results-wrap"><p class="empty-msg">Click "Run Audit" to scan for security issues.</p></div>
  </section>
</div>

<!-- ============================================================ -->
<!-- Usage Tab -->
<!-- ============================================================ -->
<div class="tab-panel" id="tab-usage">
  <section id="sec-stats">
    <h2>Usage Statistics</h2>
    <div id="stats-table-wrap"><p class="empty-msg">Loading...</p></div>
  </section>

  <section id="sec-stats-cards">
    <h2>Usage Details</h2>
    <div class="card-grid" id="stats-cards"></div>
  </section>

  <section>
    <h2>Historical Resource Usage</h2>
    <div id="history-chart-wrap"><p class="empty-msg">Loading...</p></div>
  </section>
</div>

<!-- ============================================================ -->
<!-- Config Tab -->
<!-- ============================================================ -->
<div class="tab-panel" id="tab-config">
  <section id="sec-registry">
    <h2>Agent Registry</h2>
    <div id="registry-table-wrap"><p class="empty-msg">Loading...</p></div>
  </section>

  <section id="sec-env">
    <h2>Environment Variables</h2>
    <div id="env-table-wrap"><p class="empty-msg">Loading...</p></div>
  </section>

  <section id="sec-config">
    <h2>Agent Configurations</h2>
    <div id="config-wrap"><p class="empty-msg">Loading...</p></div>
  </section>
</div>

<footer>
  <div class="connection-status">
    <span class="status-dot live" id="conn-dot-footer"></span>
    <span id="conn-text-footer">Connected</span>
  </div>
  <div id="last-updated">Last updated: —</div>
</footer>

<script src="/static/js/utils.js"></script>
<script src="/static/js/render.js"></script>
<script src="/static/js/timeline.js"></script>
<script src="/static/js/app.js"></script>
</body>
</html>
